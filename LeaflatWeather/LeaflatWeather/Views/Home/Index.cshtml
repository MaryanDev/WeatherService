
@{
    ViewBag.Title = "Index";
}
@section HeadStyles{
    
    
}
@section HeadScripts{
    
}
<div ng-controller="weatherController" class="container text-center">
    <div id="mapContainer">
        <leaflet style="width:100%;height:100%;" center="center" markers="mapMarkers"></leaflet>
    </div>
    <div id="regionInfoPopUp">
        <div id="popOverHeader" class="text-right">
            <h4 class="col-xs-8 col-sm-8 col-md-8 col-lg-8 text-info">Weather data</h4>
            <span class="glyphicon glyphicon-remove col-xs-4 col-sm-4 col-md-4 col-lg-4 text-danger"></span>
        </div>
        <table class="table table-hover table-striped">
            <tr>
                <td class="text-info">
                    Location
                </td>
                <td>
                    Country: {{weatherInfo.sys.country}}, coordinates: (lattitude={{weatherInfo.coord.lat}}, longitude={{weatherInfo.coord.lon}})
                </td>
            </tr>
            <tr>
                <td class="text-info">
                    Description
                </td>
                <td>
                    {{weatherInfo.weather[0].description}}
                </td>
            </tr>
            <tr>
                <td class="text-info">
                    Humidity
                </td>
                <td>
                    {{weatherInfo.main.humidity}}%
                </td>
            </tr>
            <tr>
                <td class="text-info">
                    Pressure
                </td>
                <td>
                    {{weatherInfo.main.pressure}}millimetre of mercury
                </td>
            </tr>
            <tr>
                <td class="text-info">
                    Temperature
                </td>
                <td>
                    {{weatherInfo.main.temp - 272}}C
                </td>
            </tr>
            <tr>
                <td class="text-info">
                    Wind
                </td>
                <td>
                    Speed: {{weatherInfo.wind.speed}}m/s
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <button ng-click="sendData()" class="btn btn-info" ng-disabled="isSended">Send Data</button>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="cssload-container" ng-if="isLoading">
                        <div class="cssload-tube-tunnel"></div>
                    </div>
                </td>
                <td><span class="text-danger">{{errorMessage}}</span><span class="text-success">{{successMessage}}</span></td>
            </tr>
        </table>
    </div>
    @section FootScripts{
        <script src="~/Scripts/pages/mainMap/geoHelper.js"></script>
        <script src="~/Scripts/pages/mainMap/weatherService.js"></script>
        <script src="~/Scripts/pages/mainMap/popUp.js"></script>
        <script src="~/Scripts/pages/mainMap/weatherController.js"></script>
    }
</div>

